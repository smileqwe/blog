<hr>
<p>title: Vue3 缓存页面<br>date: 2021-05-30 23:24:34<br>type: “js”<br>tag: vue3 vue2 kepp-alive 缓存组件 组件缓存</p>
<hr>
<h1 id="Vue3-缓存页面"><a href="#Vue3-缓存页面" class="headerlink" title="Vue3 缓存页面"></a>Vue3 缓存页面</h1><h2 id="vue3-使用-keep-alive-缓存列表类页面"><a href="#vue3-使用-keep-alive-缓存列表类页面" class="headerlink" title="vue3 使用 keep-alive 缓存列表类页面"></a>vue3 使用 keep-alive 缓存列表类页面</h2><blockquote>
<p>我们平时在开发中都会遇到列表类型的组件，不管是pc的查询，分页，还是手机端的分页，滚动位置，这类列表还经常有对应的详情页，我们希望用户进入详情页之后返回列表页时，能够展示进入详情页之前的状态，此时就要用的vue-router的keep-alive组件了</p>
</blockquote>
<p>因为我们不需要缓存所有页面，比方说详情页，那我们就需要一个配置来区分哪个页面是需要缓存的，这里我们采用在 router 的 meta 信息里加上标志位的方式区分</p>
<p>在 router.js 中为需要缓存的组件增加 <code>keepAlive: true</code></p>
<pre><code class="js">{
    path: &#39;/services&#39;,
    component: Services,
    meta: {
        title: &#39;服务列表&#39;,
        requireAuth: false,
        keepAlive: true
    },
    children: []
}</code></pre>
<p>在vue2中  我们可以使用下面的方式</p>
<pre><code class="html">&lt;keep-alive&gt;
    &lt;router-view v-if=&quot;$route.meta.keepAlive&quot;&gt;&lt;/router-view&gt;
&lt;/keep-alive&gt;
&lt;router-view v-if=&quot;!$route.meta.keepAlive&quot;&gt;&lt;/router-view&gt;</code></pre>
<p>在vue3中</p>
<pre><code class="html">&lt;router-view v-slot=&quot;{ Component, route }&quot;&gt;
    &lt;keep-alive&gt;
        &lt;component
        v-if=&quot;route.meta.keepAlive&quot;
        :is=&quot;Component&quot;
        :key=&quot;route.path&quot;
        /&gt;
    &lt;/keep-alive&gt;
    &lt;component v-if=&quot;!route.meta.keepAlive&quot; :is=&quot;Component&quot; /&gt;
&lt;/router-view&gt;</code></pre>
